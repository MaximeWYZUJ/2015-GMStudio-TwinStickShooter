<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
phase 0 : Dialogue : On parle avec le père, on reçoit la quête
phase 1 : On se dirige vers le kidnappeur
phase 2 : Dialogue : Quand on voit le vaisseau du kidnappeur
phase 3 : Course poursuite
phase 4 : Dialogue : Après avoir endommagé le vaisseau du kidnappeur

    ===Si le joueur choisit le camp du père===
    phase 5 : Combat contre le kidnappeur
        ===Si le joueur gagne le combat===
        phase 6 : Retour au bar
        phase 7 : Dialogue : On rend la quête au père
        
        ===Si le joueur perd le combat===
        phase 7 : Dialogue (intercom) : On rend la quête au père, sans récompense
        
    ===Si le joueur choisit le camp de la fille===
    phase 5 : Arrivée du père, pas de combat
    phase 5.5 : Dialogue : Le père n'est pas content
    phase 5.6 : Combat contre le père
        ===Si le joueur gagne le combat===
        le joeur gagne son butin parmi les débris
        
        ===Si le joueur perd le combat===
        phase 6 : Le père fuit, on est stun
        phase 7 : Dialogue : On rend la quête au père, sans récompense

phase 8 : butin + instance_destroy()
*/

phase=0

current_dialogue=-1


//=== Dialogues ===
//Phase 0
dialogue[0,0]= "Père : Vous êtes un mercenaire c'est ça ? J'ai absolument besoin de vous. Ma fille a été kidnappée par ces déviants ! Je vous paierai, peut m'importe le prix, mais RAMENEZ LA MOI !"

//Phase 20
dialogue[20,0]= "Spark : Ils prennent la fuite ! Vite rattrapons les !"

//Phase 40
dialogue[40,0]= "Fille : Attendez ! Ne nous tuez pas !"
dialogue[40,1]= "Joueur : Je viens vous délivrer..."
dialogue[40,2]= "Fille : C'est mon père qui vous a raconté tout ça ? Je n'ai pas été kidnappée."
dialogue[40,3]= "Fille : Quand je lui ai dit que j'aimais un Daaren, il ne l'a pas supporté..."
dialogue[40,4]= "Fille : Il a essayé de m'étrangler !"
    //On choisit le camp du père
    dialogue[40,10]= "Joueur : Ca m'est égal. Que vous le vouliez ou non, vous venez avec moi."
    dialogue[40,11]= "Amant : Jamais !"
    //On choisit le camp de la fille
    dialogue[40,20]= "Joueur : Très bien filez, je m'occupe de votre père."
    
//Phase 55
dialogue[55,0]= "Père : Qu'est ce que vous faites ? Il emmène ma fille !"
dialogue[55,1]= "Joueur : Vous m'avez trompé !"
dialogue[55,2]= "Père : Ce Daaren va la corrompre ! Je DOIS l'en empêcher."
dialogue[55,3]= "Joueur : Je ferai ce que je dois faire..."

//Phase 70
    //Dans le camp du père
        //Victoire contre le kidnappeur
        dialogue[70,0]= "Joueur : Je n'ai rien pu faire, ils n'ont pas voulu m'écouter et ont engagé le combat."
        dialogue[70,1]= "Joueur : Je vous ai ramené son corps pour que vous puissiez l'accompagner..."
        dialogue[70,2]= "Joueur : Je vous ai ramené son corps pour que vous puissiez l'accompagner... dans..."
        dialogue[70,3]= "Joueur : Je vous ai ramené son corps pour que vous puissiez l'accompagner... dans... le monde des morts."
        dialogue[70,4]= "Père : Merci, c'est mieux comme ça."
        
        //Défaite contre le kidnappeur
        dialogue[70,10]= "Joueur : Désolé, je n'ai pas réussi à les arrêter."
        dialogue[70,11]= "Père : J'espère au moins que vous réalisez une chose, c'est que vous avez gâché deux vies :"
        dialogue[70,12]= "Père : J'espère au moins que vous réalisez une chose, c'est que vous avez gâché deux vies : la mienne et celle de ma fille."
        dialogue[70,13]= "Père : Partez maintenant."
        
    //Dans le camp de la fille
        //On laisse le père s'enfuir
        dialogue[70,30]= "Père : Votre incompétence ne m'a pas laissé le choix. Je ne pouvais pas le laisser corrompre son coeur..."
        dialogue[70,31]= "Père : Votre incompétence ne m'a pas laissé le choix. Je ne pouvais pas le laisser corrompre son coeur... ni la laisser suivre cette voie."




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch(phase)
{
    case 10 :
    {
        if point_distance(global.xvaisseau,global.yvaisseau,kidnappeur.x,kidnappeur.y)&lt;view_hview[0]/2
        {phase=20}
    }
    break;
    
    case 30 :
    {
        if kidnappeur.HP&lt;=6
        {phase=40}
    }
    break;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch(phase)
{
    case 0 :
    {
        if current_dialogue&gt;=1
        {
            phase=10 ; current_dialogue=0 ; global.current_conv=0;
            
            kidnappeur=instance_create(global.xvaisseau+(choose(-1,1))*(view_wview[0]+irandom(2*view_wview[0])),global.yvaisseau+(choose(-1,1))*(view_hview[0]+irandom(2*view_hview[0])),obj_endaar_intercepteur)
            with(kidnappeur)
            {
                vitesse=14
                changement_direction=900
                HP=10
                alarm[9]=-1
                delta=7000
                script_mission=scr_leperefurax_kidnappeur()
            }
        }
        else
        {
            if current_dialogue&gt;=0
            {
                global.current_conv=1
                draw_set_halign(fa_center)
                draw_roundrect_colour(192, 872, 1728, 972, c_red, c_maroon, false /*filled rectangle*/)
                draw_text_ext(960,915,string(dialogue[0,current_dialogue]), 20, 1000)
                draw_set_halign(fa_left)
            }
            
            
            if gamepad_button_check_released(0,gp_face1)
            {current_dialogue+=1}
        }
    }
    break;
    
    case 10 :
    {
        if point_distance(global.xvaisseau,global.yvaisseau,kidnappeur.x,kidnappeur.y)&gt;0.65*view_wview[0]
        {
            draw_sprite_ext(spr_cible,1,view_wport[0]/2,view_hport[0]/2,1,1,point_direction(global.xvaisseau,global.yvaisseau,kidnappeur.x,kidnappeur.y),c_white,0.8)
        }
    }
    break;
    
    case 20 :
    {
        if current_dialogue&gt;=1
        {
            phase=30 ; current_dialogue=0 ; global.current_conv=0 ; selection=0;
            
            kidnappeur.vitesse=16
            delta=5000
            kidnappeur.changement_direction=210
        }
        else
        {
            if current_dialogue&gt;=0
            {
                global.current_conv=1
                draw_set_halign(fa_center)
                draw_roundrect_colour(192, 872, 1728, 972, c_red, c_maroon, false /*filled rectangle*/)
                draw_text_ext(960,915,string(dialogue[20,current_dialogue]), 20, 1000)
                draw_set_halign(fa_left)
            }
            
            
            if gamepad_button_check_released(0,gp_face1)
            {current_dialogue+=1}
        }
    }
    break;
    
    case 30 :
    {
        if point_distance(global.xvaisseau,global.yvaisseau,kidnappeur.x,kidnappeur.y)&gt;0.65*view_wview[0]
        {
            draw_sprite_ext(spr_cible,1,view_wport[0]/2,view_hport[0]/2,1,1,point_direction(global.xvaisseau,global.yvaisseau,kidnappeur.x,kidnappeur.y),c_white,0.8)
        }
    }
    break;
    
    case 40 :
    {
        if current_dialogue==12 || current_dialogue==21
            {phase=50 ; current_dialogue=0 ; selection=0 ; global.current_conv=0}
        else
        {
            if current_dialogue&gt;=0
            {
                global.current_conv=1
                draw_roundrect_colour(192, 872, 1728, 972, c_red, c_maroon, false /*filled rectangle*/)
                
                if current_dialogue&lt;=4 || current_dialogue==10 || current_dialogue==11
                {
                    draw_text_ext(960,915,string(dialogue[40,current_dialogue]), 20, 1000)
                    if gamepad_button_check_released(0,gp_face1)
                    {current_dialogue+=1}
                }
                else //current_dialogue==5 || current_dialogue==
                {
                    if selection==0
                    {
                        draw_text_ext_colour(960,915,string(dialogue[40,10]),20,1000,c_blue,c_blue,c_blue,c_blue,1)
                        draw_text_ext(960,915,"#" + string(dialogue[40,20]),20,1000)
                        if gamepad_button_check_released(0,gp_face1)
                        {
                            camp="pere"
                            current_dialogue=10
                        }
                        if gamepad_button_check_released(0,gp_padd)
                        {selection=1}
                    }
                    else //selection==1
                    {
                        draw_text_ext(960,915,string(dialogue[40,10]),20,1000)
                        draw_text_ext_colour(960,915,"#" + string(dialogue[40,20]),20,1000,c_blue,c_blue,c_blue,c_blue,1)
                        if gamepad_button_check_released(0,gp_face1)
                        {
                            camp="fille"
                            current_dialogue=20
                        }
                        if gamepad_button_check_released(0,gp_padu)
                        {selection=0}
                    }
                }
            }
        }
    }
    break;
    
    case 55 :
    {
        if current_dialogue&gt;=4
            {phase=56 ; current_dialogue=30 ; global.current_conv=0}
        else
        {
            if current_dialogue&gt;=0
            {
                global.current_conv=1
                draw_set_halign(fa_center)
                draw_roundrect_colour(192, 872, 1728, 972, c_red, c_maroon, false /*filled rectangle*/)
                draw_text_ext(960,915,string(dialogue[55,current_dialogue]), 20, 1000)
                draw_set_halign(fa_left)
            }
            
            
            if gamepad_button_check_released(0,gp_face1)
            {current_dialogue+=1}
        }
    }
    break;
    
    case 70 :
    {
        if camp=="pere" &amp;&amp; victoire==true
        {
            if current_dialoge&gt;=5
                {phase=80 ; global.current_conv=0}
            else
            {
                if current_dialogue&gt;=0
                {
                    global.current_conv=1
                    draw_set_halign(fa_center)
                    draw_roundrect_colour(192, 872, 1728, 972, c_red, c_maroon, false /*filled rectangle*/)
                    draw_text_ext(960,915,string(dialogue[70,current_dialogue]), 20, 1000)
                    draw_set_halign(fa_left)
                }
                
                
                if gamepad_button_check_released(0,gp_face1)
                {current_dialogue+=1}
            }
        }
        
        if camp=="pere" &amp;&amp; victoire==false
        {
            if current_dialogue&gt;=14
                {phase=80 ; global.current_conv=0}
            else
            {
                if current_dialogue&gt;=10
                {
                    global.current_conv=1
                    draw_set_halign(fa_center)
                    draw_roundrect_colour(192, 872, 1728, 972, c_red, c_maroon, false /*filled rectangle*/)
                    draw_text_ext(960,915,string(dialogue[70,current_dialogue]), 20, 1000)
                    draw_set_halign(fa_left)
                }
                
                
                if gamepad_button_check_released(0,gp_face1)
                {current_dialogue+=1}
            }
        }
        
        if camp=="fille" &amp;&amp; victoire=="false"
        {
            if current_dialogue&gt;=32
                {phase=80 ; global.current_conv=0}
            else
            {
                if current_dialogue&gt;=30
                {
                    global.current_conv=1
                    draw_set_halign(fa_center)
                    draw_roundrect_colour(192, 872, 1728, 972, c_red, c_maroon, false /*filled rectangle*/)
                    draw_text_ext(960,915,string(dialogue[70,current_dialogue]), 20, 1000)
                    draw_set_halign(fa_left)
                }
                
                
                if gamepad_button_check_released(0,gp_face1)
                {current_dialogue+=1}
            }
        }
    }
    break;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
